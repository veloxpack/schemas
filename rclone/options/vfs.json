{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://rclone.org/schemas/vfs.json",
  "title": "VFS",
  "description": "Rclone Virtual File System (VFS) options",
  "type": "object",
  "properties": {
    "no_modtime": {
      "type": "boolean",
      "default": false,
      "description": "Don't read/write the modification time (can speed things up)"
    },
    "no_checksum": {
      "type": "boolean",
      "default": false,
      "description": "Don't compare checksums on up/download"
    },
    "no_seek": {
      "type": "boolean",
      "default": false,
      "description": "Don't allow seeking in files"
    },
    "dir_cache_time": {
      "type": "string",
      "default": "5m0s",
      "description": "Time to cache directory entries for (e.g., '5m', '1h', '300s')",
      "pattern": "^[0-9]+(ns|us|µs|ms|s|m|h)$",
      "examples": ["5m", "1h", "300s"]
    },
    "vfs_refresh": {
      "type": "boolean",
      "default": false,
      "description": "Refreshes the directory cache recursively in the background on start"
    },
    "poll_interval": {
      "type": "string",
      "default": "1m0s",
      "description": "Time to wait between polling for changes, must be smaller than dir-cache-time and only on supported remotes (set 0 to disable)",
      "pattern": "^[0-9]+(ns|us|µs|ms|s|m|h)$",
      "examples": ["1m", "30s", "0s"]
    },
    "read_only": {
      "type": "boolean",
      "default": false,
      "description": "Only allow read-only access"
    },
    "vfs_links": {
      "type": "boolean",
      "default": false,
      "description": "Translate symlinks to/from regular files with a '.rclonelink' extension for the VFS"
    },
    "vfs_cache_mode": {
      "type": "string",
      "enum": ["off", "minimal", "writes", "full"],
      "default": "off",
      "description": "Cache mode: off (no caching), minimal (only open files), writes (open files + writes), full (open files + writes + reads)",
      "examples": ["off", "minimal", "writes", "full"]
    },
    "vfs_cache_poll_interval": {
      "type": "string",
      "default": "60s",
      "description": "Interval to poll the cache for stale objects",
      "pattern": "^[0-9]+(ns|us|µs|ms|s|m|h)$",
      "examples": ["60s", "1m", "30s"]
    },
    "vfs_cache_max_age": {
      "type": "string",
      "default": "1h0m0s",
      "description": "Max time since last access of objects in the cache",
      "pattern": "^[0-9]+(ns|us|µs|ms|s|m|h)$",
      "examples": ["1h", "3600s", "30m"]
    },
    "vfs_cache_max_size": {
      "oneOf": [
        {
          "type": "string",
          "pattern": "^-?[0-9]+(\\.[0-9]+)?[BKMGTP]?i?$",
          "examples": ["1G", "500M", "10Gi", "off"]
        },
        {
          "type": "integer",
          "minimum": -1
        }
      ],
      "default": "off",
      "description": "Max total size of objects in the cache (use -1 or 'off' for unlimited)"
    },
    "vfs_cache_min_free_space": {
      "oneOf": [
        {
          "type": "string",
          "pattern": "^-?[0-9]+(\\.[0-9]+)?[BKMGTP]?i?$",
          "examples": ["10G", "1Gi", "off"]
        },
        {
          "type": "integer",
          "minimum": -1
        }
      ],
      "default": "off",
      "description": "Target minimum free space on the disk containing the cache (use -1 or 'off' for no minimum)"
    },
    "vfs_read_chunk_size": {
      "oneOf": [
        {
          "type": "string",
          "pattern": "^[0-9]+(\\.[0-9]+)?[BKMGTP]?i?$",
          "examples": ["128M", "64Mi", "256M"]
        },
        {
          "type": "integer",
          "minimum": 0
        }
      ],
      "default": "128Mi",
      "description": "Read the source objects in chunks of this size"
    },
    "vfs_read_chunk_size_limit": {
      "oneOf": [
        {
          "type": "string",
          "pattern": "^-?[0-9]+(\\.[0-9]+)?[BKMGTP]?i?$",
          "examples": ["1G", "512M", "off"]
        },
        {
          "type": "integer",
          "minimum": -1
        }
      ],
      "default": "off",
      "description": "If greater than --vfs-read-chunk-size, double the chunk size after each chunk read, until the limit is reached ('off' is unlimited)"
    },
    "vfs_read_chunk_streams": {
      "type": "integer",
      "default": 0,
      "minimum": 0,
      "description": "The number of parallel streams to read at once (0 for no limit)"
    },
    "dir_perms": {
      "type": "string",
      "default": "0777",
      "pattern": "^0?[0-7]{3,4}$",
      "description": "Directory permissions (octal format, e.g., '0777', '0755')",
      "examples": ["0777", "0755", "0700"]
    },
    "file_perms": {
      "type": "string",
      "default": "0666",
      "pattern": "^0?[0-7]{3,4}$",
      "description": "File permissions (octal format, e.g., '0666', '0644')",
      "examples": ["0666", "0644", "0600"]
    },
    "link_perms": {
      "type": "string",
      "default": "0666",
      "pattern": "^0?[0-7]{3,4}$",
      "description": "Link permissions (octal format, e.g., '0666', '0777')",
      "examples": ["0666", "0777", "0644"]
    },
    "vfs_case_insensitive": {
      "type": "boolean",
      "description": "If a file name not found, find a case insensitive match (defaults to true on Windows and macOS, false otherwise)"
    },
    "vfs_block_norm_dupes": {
      "type": "boolean",
      "default": false,
      "description": "If duplicate filenames exist in the same directory (after normalization), log an error and hide the duplicates (may have a performance cost)"
    },
    "vfs_write_wait": {
      "type": "string",
      "default": "1s",
      "description": "Time to wait for in-sequence write before giving error",
      "pattern": "^[0-9]+(ns|us|µs|ms|s|m|h)$",
      "examples": ["1s", "500ms", "2s"]
    },
    "vfs_read_wait": {
      "type": "string",
      "default": "20ms",
      "description": "Time to wait for in-sequence read before seeking",
      "pattern": "^[0-9]+(ns|us|µs|ms|s|m|h)$",
      "examples": ["20ms", "50ms", "100ms"]
    },
    "vfs_write_back": {
      "type": "string",
      "default": "5s",
      "description": "Time to writeback files after last use when using cache",
      "pattern": "^[0-9]+(ns|us|µs|ms|s|m|h)$",
      "examples": ["5s", "10s", "30s"]
    },
    "vfs_read_ahead": {
      "oneOf": [
        {
          "type": "string",
          "pattern": "^[0-9]+(\\.[0-9]+)?[BKMGTP]?i?$",
          "examples": ["0", "128M", "256Mi"]
        },
        {
          "type": "integer",
          "minimum": 0
        }
      ],
      "default": "0",
      "description": "Extra read ahead over --buffer-size when using cache-mode full"
    },
    "vfs_used_is_size": {
      "type": "boolean",
      "default": false,
      "description": "Use the `rclone size` algorithm for Used size"
    },
    "vfs_fast_fingerprint": {
      "type": "boolean",
      "default": false,
      "description": "Use fast (less accurate) fingerprints for change detection"
    },
    "vfs_disk_space_total_size": {
      "oneOf": [
        {
          "type": "string",
          "pattern": "^-?[0-9]+(\\.[0-9]+)?[BKMGTP]?i?$",
          "examples": ["1T", "500G", "off"]
        },
        {
          "type": "integer",
          "minimum": -1
        }
      ],
      "default": "off",
      "description": "Specify the total space of disk (use -1 or 'off' for actual disk size)"
    },
    "umask": {
      "type": "string",
      "pattern": "^0?[0-7]{3,4}$",
      "description": "Override the permission bits set by the filesystem (not supported on Windows)",
      "examples": ["0022", "0077", "0002"]
    },
    "uid": {
      "type": "integer",
      "minimum": 0,
      "description": "Override the uid field set by the filesystem (not supported on Windows)"
    },
    "gid": {
      "type": "integer",
      "minimum": 0,
      "description": "Override the gid field set by the filesystem (not supported on Windows)"
    },
    "vfs_metadata_extension": {
      "type": "string",
      "default": "",
      "description": "Set the extension to read metadata from (e.g., '.meta', '.json')",
      "pattern": "^(\\.\\w+)?$",
      "examples": ["", ".meta", ".json", ".metadata"]
    }
  },
  "additionalProperties": false,
  "examples": [
    {
      "vfs_cache_mode": "writes",
      "vfs_cache_max_size": "10G",
      "dir_cache_time": "5m",
      "read_only": false
    },
    {
      "vfs_cache_mode": "full",
      "vfs_cache_max_age": "1h",
      "vfs_read_chunk_size": "128M",
      "vfs_read_ahead": "256M"
    },
    {
      "read_only": true,
      "no_modtime": true,
      "vfs_cache_mode": "off"
    }
  ]
}


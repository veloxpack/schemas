{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://rclone.org/schemas/schema.json",
  "title": "Rclone Storage Configuration",
  "description": "Configuration schema for rclone storage driver supporting multiple backends and chaining",
  "type": "object",
  "properties": {
    "remotes": {
      "type": "array",
      "title": "Storage Remotes",
      "description": "List of configured storage backends (can reference each other for layering)",
      "items": {
        "$ref": "#/$defs/remote"
      },
      "minItems": 1
    },
    "remote": {
      "type": "string",
      "title": "Active Remote",
      "description": "Name of the remote to use for operations (must exist in remotes array)",
      "pattern": "^[a-zA-Z0-9_-]+$",
      "examples": ["my-s3-remote", "encrypted", "aws-s3"]
    },
    "remotePath": {
      "type": "string",
      "title": "Remote Path",
      "description": "Path within the remote to use. Supports template variables: ${pvc.metadata.namespace} and ${pvc.metadata.name}",
      "examples": [
        "my-bucket",
        "my-bucket/${pvc.metadata.namespace}/${pvc.metadata.name}",
        "backups/${pvc.metadata.namespace}",
        "data/${pvc.metadata.name}"
      ]
    }
  },
  "required": ["remotes", "remote", "remotePath"],
  "$defs": {
    "remote": {
      "type": "object",
      "title": "Storage Remote Configuration",
      "description": "Individual storage backend configuration",
      "required": ["name", "type"],
      "properties": {
        "name": {
          "type": "string",
          "title": "Storage Name",
          "description": "Unique name for this storage (used for referencing in other remotes)",
          "pattern": "^[a-zA-Z0-9_-]+$",
          "minLength": 1,
          "maxLength": 64,
          "examples": ["myremote", "backup-storage", "cloud_drive", "encrypted"]
        },
        "type": {
          "type": "string",
          "title": "Backend Type",
          "description": "Select the storage backend type",
          "oneOf": [
            { "const": "local", "title": "Local Filesystem" },
            { "const": "s3", "title": "Amazon S3" },
            { "const": "drive", "title": "Google Drive" },
            { "const": "dropbox", "title": "Dropbox" },
            { "const": "onedrive", "title": "Microsoft OneDrive" },
            { "const": "box", "title": "Box" },
            { "const": "azureblob", "title": "Azure Blob Storage" },
            { "const": "azurefiles", "title": "Azure Files" },
            { "const": "b2", "title": "Backblaze B2" },
            { "const": "googlecloudstorage", "title": "Google Cloud Storage" },
            { "const": "googlephotos", "title": "Google Photos" },
            { "const": "swift", "title": "OpenStack Swift" },
            { "const": "sftp", "title": "SFTP" },
            { "const": "ftp", "title": "FTP" },
            { "const": "webdav", "title": "WebDAV" },
            { "const": "smb", "title": "SMB/CIFS" },
            { "const": "http", "title": "HTTP" },
            { "const": "mega", "title": "MEGA" },
            { "const": "pcloud", "title": "pCloud" },
            { "const": "storj", "title": "Storj" },
            { "const": "yandex", "title": "Yandex Disk" },
            { "const": "koofr", "title": "Koofr" },
            { "const": "jottacloud", "title": "Jottacloud" },
            { "const": "mailru", "title": "Mail.ru Cloud" },
            { "const": "hidrive", "title": "HiDrive" },
            { "const": "crypt", "title": "Encryption" },
            { "const": "chunker", "title": "Chunker" },
            { "const": "compress", "title": "Compress" },
            { "const": "union", "title": "Union" },
            { "const": "alias", "title": "Alias" },
            { "const": "cache", "title": "Cache" },
            { "const": "combine", "title": "Combine" },
            { "const": "hasher", "title": "Hasher" },
            { "const": "archive", "title": "Archive Reader" },
            { "const": "memory", "title": "Memory" },
            { "const": "fichier", "title": "1Fichier" },
            { "const": "internetarchive", "title": "Internet Archive" },
            { "const": "pikpak", "title": "PikPak" },
            { "const": "putio", "title": "Put.io" },
            { "const": "premiumizeme", "title": "Premiumize.me" },
            { "const": "protondrive", "title": "Proton Drive" },
            { "const": "seafile", "title": "Seafile" },
            { "const": "sugarsync", "title": "SugarSync" },
            { "const": "hdfs", "title": "HDFS" },
            { "const": "sia", "title": "Sia" },
            { "const": "qingstor", "title": "QingStor" },
            { "const": "oracleobjectstorage", "title": "Oracle Object Storage" },
            { "const": "netstorage", "title": "Akamai NetStorage" },
            { "const": "sharefile", "title": "Citrix ShareFile" },
            { "const": "ulozto", "title": "Uloz.to" },
            { "const": "uptobox", "title": "Uptobox" },
            { "const": "pixeldrain", "title": "Pixeldrain" },
            { "const": "gofile", "title": "GoFile" },
            { "const": "linkbox", "title": "Linkbox" },
            { "const": "iclouddrive", "title": "iCloud Drive" },
            { "const": "imagekit", "title": "ImageKit" },
            { "const": "filefabric", "title": "FileFabric" },
            { "const": "filelu", "title": "FileLu" },
            { "const": "filescom", "title": "Files.com" },
            { "const": "cloudinary", "title": "Cloudinary" },
            { "const": "doi", "title": "DOI Repositories" },
            { "const": "opendrive", "title": "OpenDrive" },
            { "const": "quatrix", "title": "Quatrix" },
            { "const": "zoho", "title": "Zoho WorkDrive" }
          ]
        },
        "backend": {
          "type": "object",
          "title": "Backend Configuration",
          "description": "Backend-specific options (loaded based on selected type)"
        },
        "general_options": {
          "type": "object",
          "title": "General Options",
          "description": "General rclone configuration options",
          "$ref": "#/$defs/general_options"
        },
        "mount_options": {
          "type": "object",
          "title": "Mount Options",
          "description": "Options for mounting this remote as a filesystem",
          "$ref": "#/$defs/mount_options"
        },
        "vfs_options": {
          "type": "object",
          "title": "VFS Options",
          "description": "Virtual File System options for this remote",
          "$ref": "#/$defs/vfs_options"
        }
      },
      "allOf": [
        {
          "if": { "properties": { "type": { "const": "local" } } },
          "then": { "properties": { "backend": { "$ref": "./backends/local.json" } } }
        },
        {
          "if": { "properties": { "type": { "const": "s3" } } },
          "then": { "properties": { "backend": { "$ref": "./backends/s3.json" } } }
        },
        {
          "if": { "properties": { "type": { "const": "drive" } } },
          "then": { "properties": { "backend": { "$ref": "./backends/drive.json" } } }
        },
        {
          "if": { "properties": { "type": { "const": "dropbox" } } },
          "then": { "properties": { "backend": { "$ref": "./backends/dropbox.json" } } }
        },
        {
          "if": { "properties": { "type": { "const": "onedrive" } } },
          "then": { "properties": { "backend": { "$ref": "./backends/onedrive.json" } } }
        },
        {
          "if": { "properties": { "type": { "const": "box" } } },
          "then": { "properties": { "backend": { "$ref": "./backends/box.json" } } }
        },
        {
          "if": { "properties": { "type": { "const": "sftp" } } },
          "then": { "properties": { "backend": { "$ref": "./backends/sftp.json" } } }
        },
        {
          "if": { "properties": { "type": { "const": "ftp" } } },
          "then": { "properties": { "backend": { "$ref": "./backends/ftp.json" } } }
        },
        {
          "if": { "properties": { "type": { "const": "webdav" } } },
          "then": { "properties": { "backend": { "$ref": "./backends/webdav.json" } } }
        },
        {
          "if": { "properties": { "type": { "const": "smb" } } },
          "then": { "properties": { "backend": { "$ref": "./backends/smb.json" } } }
        },
        {
          "if": { "properties": { "type": { "const": "crypt" } } },
          "then": { "properties": { "backend": { "$ref": "./backends/crypt.json" } } }
        },
        {
          "if": { "properties": { "type": { "const": "azureblob" } } },
          "then": { "properties": { "backend": { "$ref": "./backends/azureblob.json" } } }
        },
        {
          "if": { "properties": { "type": { "const": "azurefiles" } } },
          "then": { "properties": { "backend": { "$ref": "./backends/azurefiles.json" } } }
        },
        {
          "if": { "properties": { "type": { "const": "b2" } } },
          "then": { "properties": { "backend": { "$ref": "./backends/b2.json" } } }
        },
        {
          "if": { "properties": { "type": { "const": "swift" } } },
          "then": { "properties": { "backend": { "$ref": "./backends/swift.json" } } }
        },
        {
          "if": { "properties": { "type": { "const": "googlecloudstorage" } } },
          "then": { "properties": { "backend": { "$ref": "./backends/googlecloudstorage.json" } } }
        },
        {
          "if": { "properties": { "type": { "const": "googlephotos" } } },
          "then": { "properties": { "backend": { "$ref": "./backends/googlephotos.json" } } }
        },
        {
          "if": { "properties": { "type": { "const": "mega" } } },
          "then": { "properties": { "backend": { "$ref": "./backends/mega.json" } } }
        },
        {
          "if": { "properties": { "type": { "const": "pcloud" } } },
          "then": { "properties": { "backend": { "$ref": "./backends/pcloud.json" } } }
        },
        {
          "if": { "properties": { "type": { "const": "storj" } } },
          "then": { "properties": { "backend": { "$ref": "./backends/storj.json" } } }
        },
        {
          "if": { "properties": { "type": { "const": "yandex" } } },
          "then": { "properties": { "backend": { "$ref": "./backends/yandex.json" } } }
        },
        {
          "if": { "properties": { "type": { "const": "koofr" } } },
          "then": { "properties": { "backend": { "$ref": "./backends/koofr.json" } } }
        },
        {
          "if": { "properties": { "type": { "const": "jottacloud" } } },
          "then": { "properties": { "backend": { "$ref": "./backends/jottacloud.json" } } }
        },
        {
          "if": { "properties": { "type": { "const": "mailru" } } },
          "then": { "properties": { "backend": { "$ref": "./backends/mailru.json" } } }
        },
        {
          "if": { "properties": { "type": { "const": "hidrive" } } },
          "then": { "properties": { "backend": { "$ref": "./backends/hidrive.json" } } }
        },
        {
          "if": { "properties": { "type": { "const": "union" } } },
          "then": { "properties": { "backend": { "$ref": "./backends/union.json" } } }
        },
        {
          "if": { "properties": { "type": { "const": "alias" } } },
          "then": { "properties": { "backend": { "$ref": "./backends/alias.json" } } }
        },
        {
          "if": { "properties": { "type": { "const": "chunker" } } },
          "then": { "properties": { "backend": { "$ref": "./backends/chunker.json" } } }
        },
        {
          "if": { "properties": { "type": { "const": "compress" } } },
          "then": { "properties": { "backend": { "$ref": "./backends/compress.json" } } }
        },
        {
          "if": { "properties": { "type": { "const": "cache" } } },
          "then": { "properties": { "backend": { "$ref": "./backends/cache.json" } } }
        },
        {
          "if": { "properties": { "type": { "const": "combine" } } },
          "then": { "properties": { "backend": { "$ref": "./backends/combine.json" } } }
        },
        {
          "if": { "properties": { "type": { "const": "hasher" } } },
          "then": { "properties": { "backend": { "$ref": "./backends/hasher.json" } } }
        },
        {
          "if": { "properties": { "type": { "const": "archive" } } },
          "then": { "properties": { "backend": { "$ref": "./backends/archive.json" } } }
        },
        {
          "if": { "properties": { "type": { "const": "memory" } } },
          "then": { "properties": { "backend": { "$ref": "./backends/memory.json" } } }
        },
        {
          "if": { "properties": { "type": { "const": "http" } } },
          "then": { "properties": { "backend": { "$ref": "./backends/http.json" } } }
        },
        {
          "if": { "properties": { "type": { "const": "fichier" } } },
          "then": { "properties": { "backend": { "$ref": "./backends/fichier.json" } } }
        },
        {
          "if": { "properties": { "type": { "const": "internetarchive" } } },
          "then": { "properties": { "backend": { "$ref": "./backends/internetarchive.json" } } }
        },
        {
          "if": { "properties": { "type": { "const": "pikpak" } } },
          "then": { "properties": { "backend": { "$ref": "./backends/pikpak.json" } } }
        },
        {
          "if": { "properties": { "type": { "const": "putio" } } },
          "then": { "properties": { "backend": { "$ref": "./backends/putio.json" } } }
        },
        {
          "if": { "properties": { "type": { "const": "premiumizeme" } } },
          "then": { "properties": { "backend": { "$ref": "./backends/premiumizeme.json" } } }
        },
        {
          "if": { "properties": { "type": { "const": "protondrive" } } },
          "then": { "properties": { "backend": { "$ref": "./backends/protondrive.json" } } }
        },
        {
          "if": { "properties": { "type": { "const": "seafile" } } },
          "then": { "properties": { "backend": { "$ref": "./backends/seafile.json" } } }
        },
        {
          "if": { "properties": { "type": { "const": "sugarsync" } } },
          "then": { "properties": { "backend": { "$ref": "./backends/sugarsync.json" } } }
        },
        {
          "if": { "properties": { "type": { "const": "hdfs" } } },
          "then": { "properties": { "backend": { "$ref": "./backends/hdfs.json" } } }
        },
        {
          "if": { "properties": { "type": { "const": "sia" } } },
          "then": { "properties": { "backend": { "$ref": "./backends/sia.json" } } }
        },
        {
          "if": { "properties": { "type": { "const": "qingstor" } } },
          "then": { "properties": { "backend": { "$ref": "./backends/qingstor.json" } } }
        },
        {
          "if": { "properties": { "type": { "const": "oracleobjectstorage" } } },
          "then": { "properties": { "backend": { "$ref": "./backends/oracleobjectstorage.json" } } }
        },
        {
          "if": { "properties": { "type": { "const": "netstorage" } } },
          "then": { "properties": { "backend": { "$ref": "./backends/netstorage.json" } } }
        },
        {
          "if": { "properties": { "type": { "const": "sharefile" } } },
          "then": { "properties": { "backend": { "$ref": "./backends/sharefile.json" } } }
        },
        {
          "if": { "properties": { "type": { "const": "ulozto" } } },
          "then": { "properties": { "backend": { "$ref": "./backends/ulozto.json" } } }
        },
        {
          "if": { "properties": { "type": { "const": "uptobox" } } },
          "then": { "properties": { "backend": { "$ref": "./backends/uptobox.json" } } }
        },
        {
          "if": { "properties": { "type": { "const": "pixeldrain" } } },
          "then": { "properties": { "backend": { "$ref": "./backends/pixeldrain.json" } } }
        },
        {
          "if": { "properties": { "type": { "const": "gofile" } } },
          "then": { "properties": { "backend": { "$ref": "./backends/gofile.json" } } }
        },
        {
          "if": { "properties": { "type": { "const": "linkbox" } } },
          "then": { "properties": { "backend": { "$ref": "./backends/linkbox.json" } } }
        },
        {
          "if": { "properties": { "type": { "const": "iclouddrive" } } },
          "then": { "properties": { "backend": { "$ref": "./backends/iclouddrive.json" } } }
        },
        {
          "if": { "properties": { "type": { "const": "imagekit" } } },
          "then": { "properties": { "backend": { "$ref": "./backends/imagekit.json" } } }
        },
        {
          "if": { "properties": { "type": { "const": "filefabric" } } },
          "then": { "properties": { "backend": { "$ref": "./backends/filefabric.json" } } }
        },
        {
          "if": { "properties": { "type": { "const": "filelu" } } },
          "then": { "properties": { "backend": { "$ref": "./backends/filelu.json" } } }
        },
        {
          "if": { "properties": { "type": { "const": "filescom" } } },
          "then": { "properties": { "backend": { "$ref": "./backends/filescom.json" } } }
        },
        {
          "if": { "properties": { "type": { "const": "cloudinary" } } },
          "then": { "properties": { "backend": { "$ref": "./backends/cloudinary.json" } } }
        },
        {
          "if": { "properties": { "type": { "const": "doi" } } },
          "then": { "properties": { "backend": { "$ref": "./backends/doi.json" } } }
        },
        {
          "if": { "properties": { "type": { "const": "opendrive" } } },
          "then": { "properties": { "backend": { "$ref": "./backends/opendrive.json" } } }
        },
        {
          "if": { "properties": { "type": { "const": "quatrix" } } },
          "then": { "properties": { "backend": { "$ref": "./backends/quatrix.json" } } }
        },
        {
          "if": { "properties": { "type": { "const": "zoho" } } },
          "then": { "properties": { "backend": { "$ref": "./backends/zoho.json" } } }
        }
      ]
    },
    "general_options": {
      "$ref": "./options/config.json"
    },
    "mount_options": {
      "$ref": "./options/mount.json"
    },
    "vfs_options": {
      "$ref": "./options/vfs.json"
    }
  },
  "examples": [
    {
      "remotes": [
        {
          "name": "mydrive",
          "type": "drive",
          "backend": {
            "client_id": "...",
            "client_secret": "..."
          }
        }
      ],
      "remote": "mydrive",
      "remotePath": "backups"
    },
    {
      "remotes": [
        {
          "name": "my-s3-remote",
          "type": "s3",
          "backend": {
            "provider": "AWS",
            "region": "us-east-1",
            "access_key_id": "...",
            "secret_access_key": "..."
          }
        }
      ],
      "remote": "my-s3-remote",
      "remotePath": "my-bucket/${pvc.metadata.namespace}/${pvc.metadata.name}"
    },
    {
      "remotes": [
        {
          "name": "mydrive",
          "type": "drive",
          "backend": {
            "client_id": "...",
            "client_secret": "..."
          }
        },
        {
          "name": "encrypted",
          "type": "crypt",
          "backend": {
            "remote": "mydrive:encrypted-folder",
            "filename_encryption": "standard",
            "password": "my-secret",
            "password2": "my-salt"
          }
        }
      ],
      "remote": "encrypted",
      "remotePath": "data/${pvc.metadata.namespace}"
    },
    {
      "remotes": [
        {
          "name": "aws-s3",
          "type": "s3",
          "backend": {
            "provider": "AWS",
            "region": "us-east-1",
            "access_key_id": "...",
            "secret_access_key": "..."
          }
        },
        {
          "name": "encrypted-s3",
          "type": "crypt",
          "backend": {
            "remote": "aws-s3:secure-bucket",
            "filename_encryption": "standard",
            "password": "encryption-key"
          }
        },
        {
          "name": "chunked-encrypted-s3",
          "type": "chunker",
          "backend": {
            "remote": "encrypted-s3:",
            "chunk_size": "2G"
          }
        }
      ],
      "remote": "chunked-encrypted-s3",
      "remotePath": "volumes/${pvc.metadata.namespace}/${pvc.metadata.name}"
    }
  ],
  "$comment": "Schema supports multiple remotes in an array, allowing backend chaining (e.g., S3 → Crypt → Chunker). Each remote can reference others via 'remote' field in backends like crypt, chunker, union, etc. The type field uses oneOf with const/title for dropdown generation. Backend validation uses allOf with if/then."
}
